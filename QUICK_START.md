# å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ä¸€ã€ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£…å¿…è¦è½¯ä»¶
- **Node.js**: ä¸‹è½½å¹¶å®‰è£… Node.js v16+ (https://nodejs.org/)
- **Ganache**: ä¸‹è½½å¹¶å®‰è£… Ganache GUI (https://trufflesuite.com/ganache/)
- **MetaMask**: åœ¨æµè§ˆå™¨ä¸­å®‰è£… MetaMask æ‰©å±• (https://metamask.io/)

### 2. æ£€æŸ¥ç¯å¢ƒ
```bash
node --version  # åº”è¯¥æ˜¾ç¤º v16 æˆ–æ›´é«˜
npm --version   # åº”è¯¥æ˜¾ç¤º 6.x æˆ–æ›´é«˜
```

## äºŒã€å¯åŠ¨ Ganache

1. æ‰“å¼€ Ganache åº”ç”¨
2. ç‚¹å‡» "New Workspace" æˆ– "Quickstart"
3. ç¡®ä¿è®¾ç½®ï¼š
   - RPC Server: `http://127.0.0.1:8545`
   - Chain ID: `1337`
   - Network ID: `5777` (é»˜è®¤)
4. ç‚¹å‡» "Save Workspace"
5. **é‡è¦**: å¤åˆ¶ç¬¬ä¸€ä¸ªè´¦æˆ·çš„ç§é’¥ï¼ˆç‚¹å‡»é’¥åŒ™å›¾æ ‡ï¼‰ï¼Œç¨åéœ€è¦ç”¨åˆ°

## ä¸‰ã€é…ç½®å’Œéƒ¨ç½²åˆçº¦

### 1. é…ç½® Hardhat
ç¼–è¾‘ `contracts/hardhat.config.ts`ï¼š
```typescript
accounts: [
  'ä½ çš„Ganacheè´¦æˆ·ç§é’¥'  // ç²˜è´´åˆšæ‰å¤åˆ¶çš„ç§é’¥
]
```

### 2. å®‰è£…ä¾èµ–
```bash
cd contracts
npm install
```

### 3. ç¼–è¯‘åˆçº¦
```bash
npx hardhat compile
```

å¦‚æœå‡ºç° OpenZeppelin ç›¸å…³çš„é”™è¯¯ï¼Œè¿è¡Œï¼š
```bash
npm install @openzeppelin/contracts@^5.0.0
```

### 4. éƒ¨ç½²åˆçº¦
```bash
npx hardhat run scripts/deploy.ts --network ganache
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Deploying contracts with the account: 0x...
Account balance: 100000000000000000000 ETH

1. Deploying BetToken (ERC20)...
BetToken deployed to: 0x...

2. Deploying LotteryTicket (ERC721)...
LotteryTicket deployed to: 0x...

3. Deploying BettingPlatform...
BettingPlatform deployed to: 0x...

4. Setting BettingPlatform as authorized minter...
Authorization set successfully

5. Deploying OrderBook...
OrderBook deployed to: 0x...

âœ… All contracts deployed successfully!
```

### 5. éªŒè¯éƒ¨ç½²
æ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶æ˜¯å¦å·²æ›´æ–°ï¼š
- `contracts/contract-addresses.json`
- `frontend/src/utils/contract-addresses.json`

è¿™ä¸¤ä¸ªæ–‡ä»¶åº”è¯¥åŒ…å«ç›¸åŒçš„åˆçº¦åœ°å€ã€‚

## å››ã€é…ç½®å‰ç«¯

### 1. å®‰è£…ä¾èµ–
```bash
cd ../frontend
npm install
```

### 2. é…ç½® MetaMask

#### æ·»åŠ  Ganache ç½‘ç»œ
1. æ‰“å¼€ MetaMask
2. ç‚¹å‡»ç½‘ç»œä¸‹æ‹‰èœå•
3. é€‰æ‹© "Add Network" æˆ– "æ·»åŠ ç½‘ç»œ"
4. å¡«å†™ä¿¡æ¯ï¼š
   - Network Name: `Ganache Test Chain`
   - New RPC URL: `http://127.0.0.1:8545`
   - Chain ID: `1337`
   - Currency Symbol: `ETH`
5. ç‚¹å‡» "Save"

#### å¯¼å…¥è´¦æˆ·
1. åœ¨ MetaMask ä¸­ç‚¹å‡»è´¦æˆ·å›¾æ ‡
2. é€‰æ‹© "Import Account" æˆ– "å¯¼å…¥è´¦æˆ·"
3. ç²˜è´´ Ganache ä¸­çš„è´¦æˆ·ç§é’¥
4. å¯¼å…¥å¤šä¸ªè´¦æˆ·ä»¥ä¾¿æµ‹è¯•ï¼ˆå»ºè®®è‡³å°‘å¯¼å…¥2ä¸ªè´¦æˆ·ï¼‰

## äº”ã€å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm run start
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

## å…­ã€æµ‹è¯•æµç¨‹

### 1. è¿æ¥é’±åŒ…
- æ‰“å¼€ `http://localhost:3000`
- ç‚¹å‡» "è¿æ¥é’±åŒ…"
- åœ¨ MetaMask ä¸­ç¡®è®¤è¿æ¥

### 2. åˆ›å»ºé¡¹ç›®ï¼ˆä½œä¸ºå…¬è¯äººï¼‰
- ç‚¹å‡» "åˆ›å»ºé¡¹ç›®"
- å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
  - æ ‡é¢˜ï¼šä¾‹å¦‚ "NBAæ€»å† å†›"
  - é€‰é¡¹ï¼šä¾‹å¦‚ "æ¹–äºº"ã€"å‹‡å£«"ã€"å‡¯å°”ç‰¹äºº"
  - å¥–æ± ï¼šä¾‹å¦‚ 10 ETH
  - æˆªæ­¢æ—¶é—´ï¼šé€‰æ‹©ä¸€ä¸ªæœªæ¥çš„æ—¶é—´
- ç‚¹å‡» "åˆ›å»ºé¡¹ç›®"
- åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“

### 3. è´­ä¹°å½©ç¥¨ï¼ˆä½œä¸ºç©å®¶ï¼‰
- è¿”å›é¦–é¡µï¼Œç‚¹å‡»åˆšåˆ›å»ºçš„é¡¹ç›®
- é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼ˆä¾‹å¦‚ "æ¹–äºº"ï¼‰
- ç‚¹å‡» "è´­ä¹°å½©ç¥¨ (1 ETH)"
- åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“

### 4. æŸ¥çœ‹æˆ‘çš„å½©ç¥¨
- ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ "æˆ‘çš„å½©ç¥¨" æŒ‰é’®
- æŸ¥çœ‹æ‹¥æœ‰çš„å½©ç¥¨åˆ—è¡¨

### 5. æŒ‚å•å‡ºå”®å½©ç¥¨
- åœ¨ "æˆ‘çš„å½©ç¥¨" é¡µé¢
- è¾“å…¥å‡ºå”®ä»·æ ¼ï¼ˆä¾‹å¦‚ 1.5 ETHï¼‰
- ç‚¹å‡» "æŒ‚å•å‡ºå”®"
- åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“

### 6. ä»è®¢å•ç°¿è´­ä¹°
- è¿”å›é¡¹ç›®è¯¦æƒ…é¡µ
- ç‚¹å‡» "æ˜¾ç¤ºè®¢å•ç°¿"
- æŸ¥çœ‹æ‰€æœ‰æŒ‚å•
- ç‚¹å‡» "è´­ä¹°" æŒ‰é’®è´­ä¹°å½©ç¥¨
- åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“

### 7. ç»“ç®—é¡¹ç›®ï¼ˆä½œä¸ºå…¬è¯äººï¼‰
- åœ¨é¡¹ç›®è¯¦æƒ…é¡µ
- ç‚¹å‡» "ç»“ç®—é¡¹ç›®"
- è¾“å…¥è·èƒœé€‰é¡¹çš„ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰
- åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“
- è·èƒœè€…å°†è‡ªåŠ¨æ”¶åˆ°å¥–é‡‘

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: ç¼–è¯‘é”™è¯¯ "Source not found"
**è§£å†³**: ç¡®ä¿å·²å®‰è£… OpenZeppelin åˆçº¦ï¼š
```bash
cd contracts
npm install @openzeppelin/contracts@^5.0.0
```

### Q2: éƒ¨ç½²å¤±è´¥ "insufficient funds"
**è§£å†³**: ç¡®ä¿ Ganache è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETHï¼ˆé»˜è®¤æ¯ä¸ªè´¦æˆ·æœ‰100 ETHï¼Œåº”è¯¥è¶³å¤Ÿï¼‰

### Q3: MetaMask è¿æ¥å¤±è´¥
**è§£å†³**: 
- ç¡®ä¿ MetaMask å·²åˆ‡æ¢åˆ° Ganache ç½‘ç»œ
- æ£€æŸ¥ Ganache æ˜¯å¦æ­£åœ¨è¿è¡Œ
- å°è¯•åˆ·æ–°é¡µé¢

### Q4: å‰ç«¯æ˜¾ç¤º "Contract not exists"
**è§£å†³**: 
- æ£€æŸ¥åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®ä¿å­˜åˆ° `frontend/src/utils/contract-addresses.json`
- ç¡®ä¿å·²æˆåŠŸéƒ¨ç½²åˆçº¦

### Q5: äº¤æ˜“å¤±è´¥ "gas estimation failed"
**è§£å†³**:
- æ£€æŸ¥åˆçº¦æ˜¯å¦æ­£ç¡®éƒ¨ç½²
- ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH
- æ£€æŸ¥å‡½æ•°å‚æ•°æ˜¯å¦æ­£ç¡®

## å…«ã€å¼€å‘å»ºè®®

1. **æµ‹è¯•è´¦æˆ·**: å»ºè®®åœ¨ Ganache ä¸­å¯¼å…¥å¤šä¸ªè´¦æˆ·ï¼Œåˆ†åˆ«ç”¨äºï¼š
   - è´¦æˆ·1ï¼šå…¬è¯äººï¼ˆåˆ›å»ºé¡¹ç›®ã€ç»“ç®—ï¼‰
   - è´¦æˆ·2ï¼šç©å®¶1ï¼ˆè´­ä¹°å½©ç¥¨ã€æŒ‚å•ï¼‰
   - è´¦æˆ·3ï¼šç©å®¶2ï¼ˆè´­ä¹°å½©ç¥¨ã€ä»è®¢å•ç°¿è´­ä¹°ï¼‰

2. **è°ƒè¯•**: 
   - ä½¿ç”¨ Ganache çš„ "Transactions" æ ‡ç­¾æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“
   - ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹å‰ç«¯æ—¥å¿—
   - ä½¿ç”¨ Hardhat çš„ `console.log` åœ¨åˆçº¦ä¸­æ‰“å°æ—¥å¿—

3. **é‡ç½®**: å¦‚æœéœ€è¦é‡æ–°å¼€å§‹ï¼Œå¯ä»¥ï¼š
   - åœ¨ Ganache ä¸­ç‚¹å‡» "Reset" é‡ç½®æ‰€æœ‰äº¤æ˜“
   - é‡æ–°éƒ¨ç½²åˆçº¦
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

## ä¹ã€ä¸‹ä¸€æ­¥

å®ŒæˆåŸºç¡€æµ‹è¯•åï¼Œå¯ä»¥å°è¯•ï¼š
1. ä½¿ç”¨ ERC20 ä»£å¸æ”¯ä»˜ï¼ˆéœ€è¦ä¿®æ”¹åˆçº¦é…ç½®ï¼‰
2. æµ‹è¯•è®¢å•ç°¿çš„æœ€ä¼˜ä»·æ ¼è´­ä¹°åŠŸèƒ½
3. æµ‹è¯•å¤šä¸ªé¡¹ç›®åŒæ—¶è¿è¡Œ
4. æµ‹è¯•ç»“ç®—åŠŸèƒ½çš„åˆ†å‘é€»è¾‘

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰


